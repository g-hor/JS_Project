{"version":3,"file":"main.js","mappings":"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","sources":["webpack://state_stats/./src/scripts/data_parsers.js","webpack://state_stats/./src/scripts/map.js","webpack://state_stats/./src/index.js"],"sourcesContent":["export function calculateSD(arr) {\n  const length = arr.length;\n  const avg = arr.reduce((x, y) => x + y) / length;\n  const deviations = arr.map(n => n - avg);\n  const squareDevs = deviations.map(n => Math.pow(n, 2));\n  const variance = squareDevs.reduce((x, y) => x + y) / length;\n  return Math.sqrt(variance);\n}\n\n\n// removes commas from a stringified number\nexport function parse(numString) {\n  if (numString.includes(',')) {\n    return parseInt(numString.replace(/,/g, ''));\n  } else {\n    return parseInt(numString);\n  }\n}\n","import { calculateSD, parse } from \"./data_parsers\";\n\nexport function fetchAndRender(url1, url2, colors) {\n  const deviationText = [\n    \"Two or More Standard Deviations (SD) Below National Average (NA)\",\n    \"Between Two and One SD Below NA\",\n    \"Between One SD Below NA and NA\",\n    \"Between One SD Above NA and NA\",\n    \"Between One and Two SD Above NA\",\n    \"Two more More SD Above NA\"\n  ]\n\n  let mapData;\n  let countData;\n  let centData;\n  \n  d3.json(\"https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json\")\n    .then(data => {\n      mapData = data;\n      // console.log(mapData);\n  \n      d3.csv(url1)\n        .then(data => {\n          countData = data.map(function(state) {\n            return {\"State\": state[\"State\"],\n              \"12-17 Estimate\": state[\"12-17 Estimate\"],\n              \"18-25 Estimate\": state[\"18-25 Estimate\"],\n              \"12 or Older Estimate\": state[\"12 or Older Estimate\"], \n              \"18 or Older Estimate\": state[\"18 or Older Estimate\"],\n              \"26 or Older Estimate\": state[\"26 or Older Estimate\"]\n          }});\n          // console.log(countData);\n          \n          renderMap();\n        })\n    })\n  \n  function renderMap() {\n    const width = 950;\n    const height = 520;\n    const path = d3.geoPath(d3.geoAlbersUsa());\n    const svg = d3\n      .select('.us-map')\n      .attr('viewBox', [0, 0, width, height])\n      .on(\"click\", reset);\n    const g = svg.append('g');\n\n    // defines how much to zoom in (initialized here to allow access in later callbacks)\n    const zoom = d3.zoom()\n      .scaleExtent([1, 8])\n      .on(\"zoom\", zoomed);\n\n\n    /* uses 'mapData' to create geometric shapes for states\n      applies fill color based on selected data\n      applies 'clicked' callback function to zoom in on selected state\n    */\n    const states = g.append('g')\n      .attr('cursor', 'pointer')\n      .selectAll('path')\n      .data(topojson.feature(mapData, mapData.objects.states).features)\n      .enter()\n      .append('path')\n      .attr('d', path)\n      .attr('fill', (state) => {\n        let stateName = state.properties.name;\n        let stateData = countData.find((ele) => {\n          return ele[\"State\"] === stateName\n        })\n\n        const nationalAvg = d3.mean(countData.slice(6), ele => parse(ele[\"18 or Older Estimate\"]))\n        const standardDev = (calculateSD(d3.map(countData.slice(6), d => parse(d['18 or Older Estimate']))));\n\n        // geographical data and statistical data do not align, this handles instances where no state match is found\n        stateData ||= {\"18 or Older Estimate\": `${nationalAvg}`}\n        const stateAvg = parse(stateData[\"18 or Older Estimate\"]);\n\n        const minusTwoSD = nationalAvg - (2 * standardDev);\n        const minusOneSD = nationalAvg - (1 * standardDev);\n        const plusOneSD = nationalAvg + (1 * standardDev);\n        const plusTwoSD = nationalAvg + (2 * standardDev);\n        // debugger\n        \n        if (stateAvg <= minusTwoSD) {\n          return colors[0];\n        } else if (stateAvg > minusTwoSD && stateAvg <= minusOneSD) {\n          return colors[1];\n        } else if (stateAvg > minusOneSD && stateAvg <= nationalAvg) {\n          return colors[2];\n        } else if (stateAvg > nationalAvg && stateAvg <= plusOneSD) {\n          return colors[3];\n        } else if (stateAvg > plusOneSD && stateAvg <= plusTwoSD) {\n          return colors[4];\n        } else {\n          return colors[5];\n        }\n      })\n      .join('path')\n      // .on('click', clicked)\n      .on('click', makeModal)\n      .attr('d', path);\n\n\n    // add HTML title element to each state (displays upon hovering)\n    states.append('title').text(state => state.properties.name);\n\n\n    // adds white state borders\n    g.append('path')\n      .attr('fill', 'none')\n      .attr('stroke', 'white')\n      .attr('stroke-linejoin', 'round')\n      .attr('d', path(topojson.mesh(mapData, mapData.objects.states, (a, b) => a !== b)))\n\n\n    // create color legend\n    const legend = d3.select('.legend');\n    let yAxis = 65;\n\n    // iterate through colors to create colored rectangle + associated text description\n    colors.forEach(function(color, idx) {\n      legend.append('rect')\n        .attr('x', '0')\n        .attr('y', `${yAxis}`)\n        .attr('width', '20')\n        .attr('height', '80')\n        .attr('fill', `${color}`)\n        .attr('id', `color-${idx}`)\n        .attr('idx', idx)\n        .attr('data-text', `${deviationText[idx]}`)\n\n      d3.select(`#color-${idx}`)\n        .append('text')\n        .attr('x', '23')\n        .attr('y', `${yAxis}`)\n        .attr('width', '200')\n        .attr('height', '80')\n        .text(`${deviationText[idx]}`)\n\n      d3.select(`#color-${idx}`)\n        .on('mouseover', (e) => {\n          const el = e.target;\n          const detail = el.dataset.text;\n          const idx = Number(el.getAttribute('idx'));\n          const legendDetail = document.getElementById(\"legend-detail\");\n          const offsetLeft = document.querySelector('.map-container').offsetLeft;\n          const offsetTop = document.querySelector('.map-container').offsetTop;\n          const legendWidth = document.querySelector('.legend').width.baseVal.value;\n          legendDetail.innerText = detail;\n          legendDetail.style.display = \"block\";\n          legendDetail.style.left = `${offsetLeft + legendWidth}px`;\n          legendDetail.style.top = `${offsetTop + 65 + (80 * idx)}px`;\n          legendDetail.style.backgroundColor = color;\n        })\n        .on('mouseout', () => {\n          const legendDetail = document.getElementById(\"legend-detail\");\n          legendDetail.style.display = 'none';\n        });\n\n\n      yAxis += 80;\n    });\n\n\n    \n    // zoom in on state when clicked\n    function clicked(event, d) {\n      const [[x0, y0], [x1, y1]] = path.bounds(d);\n      event.stopPropagation();\n      states.transition().style(\"fill\", null);\n      svg.transition().duration(750).call(\n        zoom.transform,\n        d3.zoomIdentity\n          .translate(width / 2, height / 2)\n          .scale(Math.min(8, 0.9 / Math.max((x1 - x0) / width, (y1 - y0) / height)))\n          .translate(-(x0 + x1) / 2, -(y0 + y1) / 2),\n        d3.pointer(event, svg.node())\n      );\n    }\n    \n    function zoomed(event) {\n      const {transform} = event;\n      g.attr(\"transform\", transform);\n      g.attr(\"stroke-width\", 1 / transform.k);\n    }\n\n\n    // resets view back to default sizing/position\n    function reset() {\n      const countContainer = document.getElementById('count-details');\n      const centContainer = document.getElementById('percent-details');\n      const stateDetails = document.getElementById('state-details');\n    \n      countContainer.innerHTML = '';\n      centContainer.innerHTML = '';\n      stateDetails.classList.add('hidden');\n\n      states.transition().style(\"fill\", null);\n      svg.transition().duration(750).call(\n        zoom.transform,\n        d3.zoomIdentity,\n        d3.zoomTransform(svg.node()).invert([width / 2, height / 2])\n      );\n    }\n\n    // makes modal with details for selected state\n    function makeModal (event, state) {\n      event.stopPropagation();\n      const stateDetails = document.getElementById('state-details');\n      const countContainer = document.getElementById('count-details');\n      const centContainer = document.getElementById('percent-details');\n      \n      countContainer.innerHTML = '';\n      centContainer.innerHTML = '';\n\n      let stateName = state.properties.name;\n      let stateCount = countData.find((ele) => {\n        return ele[\"State\"] === stateName;\n      })\n      \n      d3.csv(url2).then(data => {\n        centData = data.map(function(state) {\n            return {\"State\": state[\"State\"],\n              \"12-17 Estimate\": state[\"12-17 Estimate\"],\n              \"18-25 Estimate\": state[\"18-25 Estimate\"],\n              \"12 or Older Estimate\": state[\"12 or Older Estimate\"], \n              \"18 or Older Estimate\": state[\"18 or Older Estimate\"],\n              \"26 or Older Estimate\": state[\"26 or Older Estimate\"]\n          }});\n\n        let stateCent = centData.find((ele) => {\n          return ele[\"State\"] === stateName;\n        })\n\n        // stateCount ||= {\"12-17 Estimate\": \"Sorry, we don't have that data.\",\n        //   \"18-25 Estimate\": \"Sorry, we don't have that data.\",\n        //   \"12 or Older Estimate\": \"Sorry, we don't have that data.\", \n        //   \"18 or Older Estimate\": \"Sorry, we don't have that data.\",\n        //   \"26 or Older Estimate\": \"Sorry, we don't have that data.\"\n        // };\n        // stateCent ||= {\"12-17 Estimate\": \"Sorry, we don't have that data.\",\n        //   \"18-25 Estimate\": \"Sorry, we don't have that data.\",\n        //   \"12 or Older Estimate\": \"Sorry, we don't have that data.\", \n        //   \"18 or Older Estimate\": \"Sorry, we don't have that data.\",\n        //   \"26 or Older Estimate\": \"Sorry, we don't have that data.\"\n        // };\n\n        const countHeader = document.createElement('li');\n        countHeader.innerHTML = `Raw count estimations (by age) for ${stateName}:`;\n        countContainer.appendChild(countHeader);\n\n        const centHeader = document.createElement('li');\n        centHeader.innerHTML = `Percentage estimations (by age) for ${stateName}:`;\n        centContainer.appendChild(centHeader);\n\n        Object.entries(stateCount).slice(1).forEach(function(pair) {\n          if (pair[1]) {\n            // debugger\n            const countPair = document.createElement('li');\n            countPair.innerHTML = `${pair[0]}: ${parse(pair[1]) * 1000} people`;\n            countContainer.appendChild(countPair)\n          }\n        })\n\n        Object.entries(stateCent).slice(1).forEach(function(pair) {\n          if (pair[1]) {\n            const centPair = document.createElement('li');\n            centPair.innerHTML = `${pair[0]}: ${pair[1]}`;\n            centContainer.appendChild(centPair)\n          }\n        })\n      })\n\n      stateDetails.classList.remove('hidden');\n      stateDetails.style.backgroundColor='lightgray';\n      stateDetails.setAttribute('z-index', '5');\n\n      clicked(event, state);\n    }\n\n    // enables click-dragging the map around inside SVG element\n    svg.call(zoom);\n\n  }\n\n}","// import Example from \"./scripts/example.js\"; // syntax to import our class file\n// import { renderMap } from \"./scripts/map.js\";\n// import { calculate } from \"./scripts/calculation.js\";\nimport { fetchAndRender } from \"./scripts/map.js\";\n\nconst ANY_ILLNESS = [\"#6B705C\", \"#A5A58D\", \"#B7B7A4\", \"#FFE8D6\", \"#DDBEA9\", \"#CB997E\"];\nconst DEPRESSION = [\"#ccccff\", \"#99ccff\", \"#6699ff\", \"#3366ff\", \"#3333ff\", \"#000066\"];\nconst SRS_ILLNESS = [\"#F7D1CD\", \"#E8C2CA\", \"#D1B3C4\", \"#B392AC\", \"#735D78\", \"#4C404F\"];\nconst SUBSTANCE_USE = [\"#EDE0D4\", \"#E6CCB2\", \"#DDB892\", \"#B08968\", \"#9C6644\", \"#7F5539\"];\nconst WEED_USE = [\"#ECF39E\", \"#BDD39C\", \"#90A955\", \"#4F772D\", \"#31572C\", \"#132A13\"];\nconst PAIN_RELIEF = [\"#FFCDB2\", \"#FFB4A2\", \"#E5989B\", \"#C17179\", \"#A36672\", \"#6D6875\"];\nconst ALCOHOL = [\"#E9E5D8\", \"#D4E0CD\", \"#A3C9A8\", \"#84B59F\", \"#69A297\", \"#50808E\"];\nconst RECEIVED_SERV = [\"#D58272\", \"#A7A18B\", \"#B0B3A8\", \"#8FA78B\", \"#61BD87\", \"#429E69\"];\nconst THOUGHTS = [\"#8DA253\", \"#C3CFA0\", \"#FEDB72\", \"#F7E1D3\", \"#EDBF9E\", \"#DA9461\"];\nconst PLANS = [\"#EFD9CE\", \"#DEC0F1\", \"#B79CED\", \"#957FEF\", \"#7161EF\", \"#3921E8\"];\nconst COCAINE = [\"#745CFF\", \"#8585FF\", \"#BAADFF\", \"#FFEEDD\", \"#FFA970\", \"#FF781F\"];\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\n  const userModal = document.getElementById('user-modal');\n  const closeButton = document.querySelector('.close');\n  const closeState = document.querySelectorAll('.close')[1];\n  const stateDetails = document.getElementById('state-details');\n  const countContainer = document.getElementById('count-details');\n  const centContainer = document.getElementById('percent-details');\n  \n  // closes instructions modal upon clicking close\n  closeButton.addEventListener('click', function() {\n    userModal.classList.add('hidden')\n  });\n\n  // closes state details modal upon clicking close\n  closeState.addEventListener('click', function() {\n    stateDetails.classList.add('hidden')\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n  });\n\n  // closes instructions modal upon clicking anywhere\n  window.addEventListener('click', function(event) {\n    if (event.target == userModal) {\n      userModal.classList.add('hidden');\n    }\n  })\n\n\n  fetchAndRender(\"NSDUH_count/table27.csv\", \"NSDUH_percentages/table27.csv\", ANY_ILLNESS);\n\n  document.getElementById(\"table27\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Any Mental Illness in the Past Year\";\n    fetchAndRender(\"NSDUH_count/table27.csv\", \"NSDUH_percentages/table27.csv\", ANY_ILLNESS);\n  })\n\n  document.getElementById(\"table28\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Serious Mental Illness in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table28.csv\", \"NSDUH_percentages/table28.csv\", SRS_ILLNESS);\n  })\n\n  document.getElementById(\"table29\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Received Mental Health Services in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table29.csv\", \"NSDUH_percentages/table29.csv\", RECEIVED_SERV);\n  })\n\n  document.getElementById(\"table30\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Major Depressive Episode in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table30.csv\", \"NSDUH_percentages/table30.csv\", DEPRESSION);\n  })\n\n  document.getElementById(\"table31\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Had Serious Thoughts of Suicide in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table31.csv\", \"NSDUH_percentages/table31.csv\", THOUGHTS);\n  })\n\n  document.getElementById(\"table32\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Made Any Suicide Plans in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table32.csv\", \"NSDUH_percentages/table32.csv\", PLANS);\n  })\n\n  document.getElementById(\"table33\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Attempted Suicide in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table33.csv\", \"NSDUH_percentages/table33.csv\", DEPRESSION);\n  })\n\n  document.getElementById(\"table7\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Cocaine Use in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table7.csv\", \"NSDUH_percentages/table7.csv\", COCAINE);\n  })\n\n  document.getElementById(\"table11\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Methamphetamine Use in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table11.csv\", \"NSDUH_percentages/table11.csv\", ANY_ILLNESS);\n  })\n\n  document.getElementById(\"table12\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Pain Reliever Misuse in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table12.csv\", \"NSDUH_percentages/table12.csv\", PAIN_RELIEF);\n  })\n\n  document.getElementById(\"table22\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Alcohol Use Disorder in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table22.csv\", \"NSDUH_percentages/table22.csv\", ALCOHOL);\n  })\n  \n  document.getElementById(\"table2\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Marijuana Use in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table2.csv\", \"NSDUH_percentages/table2.csv\", WEED_USE);\n  })\n\n  document.getElementById(\"table23\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Substance Use Disorder in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table23.csv\", \"NSDUH_percentages/table23.csv\", SUBSTANCE_USE);\n  })\n\n  document.getElementById(\"table26\").addEventListener(\"click\", () => {\n    countContainer.innerHTML = '';\n    centContainer.innerHTML = '';\n    stateDetails.classList.add('hidden');\n    document.querySelector(\".us-map\").innerHTML = \"\";\n    document.querySelector(\".legend\").innerHTML = \"\";\n    document.querySelector(\"h2\").innerHTML = \"Needing But Not Receiving Treatment at a Specialty Facility for Substance Use in the Past Year\";\n\n    fetchAndRender(\"NSDUH_count/table26.csv\", \"NSDUH_percentages/table26.csv\", ANY_ILLNESS);\n  })\n\n})"],"names":["parse","numString","includes","parseInt","replace","fetchAndRender","url1","url2","colors","deviationText","mapData","countData","centData","d3","json","then","data","csv","map","state","width","height","path","geoPath","geoAlbersUsa","svg","select","attr","on","countContainer","document","getElementById","centContainer","stateDetails","innerHTML","classList","add","states","transition","style","duration","call","zoom","transform","zoomIdentity","zoomTransform","node","invert","g","append","scaleExtent","event","k","selectAll","topojson","feature","objects","features","enter","stateName","properties","name","stateData","find","ele","nationalAvg","mean","slice","standardDev","arr","length","avg","reduce","x","y","variance","n","Math","pow","sqrt","calculateSD","d","stateAvg","minusTwoSD","minusOneSD","plusOneSD","plusTwoSD","join","stopPropagation","stateCount","stateCent","countHeader","createElement","appendChild","centHeader","Object","entries","forEach","pair","countPair","centPair","remove","backgroundColor","setAttribute","x0","y0","x1","y1","bounds","translate","scale","min","max","pointer","clicked","text","mesh","a","b","legend","yAxis","color","idx","e","el","target","detail","dataset","Number","getAttribute","legendDetail","offsetLeft","querySelector","offsetTop","legendWidth","baseVal","value","innerText","display","left","top","renderMap","ANY_ILLNESS","DEPRESSION","SRS_ILLNESS","SUBSTANCE_USE","WEED_USE","PAIN_RELIEF","ALCOHOL","RECEIVED_SERV","THOUGHTS","PLANS","COCAINE","addEventListener","userModal","closeButton","closeState","querySelectorAll","window"],"sourceRoot":""}