!function(){"use strict";!function(){function e(e){return e.includes(",")?parseInt(e.replace(/,/g,"")):parseInt(e)}function t(t,n,r){const a=["Two or More Standard Deviations (SD) Below National Average (NA)","Between Two and One SD Below NA","Between One SD Below NA and NA","Between One SD Above NA and NA","Between One and Two SD Above NA","Two more More SD Above NA"];let c,d,i;d3.json("https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json").then((o=>{c=o,d3.csv(t).then((t=>{d=t.map((function(e){return{State:e.State,"12-17 Estimate":e["12-17 Estimate"],"18-25 Estimate":e["18-25 Estimate"],"12 or Older Estimate":e["12 or Older Estimate"],"18 or Older Estimate":e["18 or Older Estimate"],"26 or Older Estimate":e["26 or Older Estimate"]}})),function(){const t=950,o=520,s=d3.geoPath(d3.geoAlbersUsa()),l=d3.select(".us-map").attr("viewBox",[0,0,t,o]).on("click",(function(){const e=document.getElementById("count-details"),n=document.getElementById("percent-details"),r=document.getElementById("state-details");e.innerHTML="",n.innerHTML="",r.classList.add("hidden"),L.transition().style("fill",null),l.transition().duration(750).call(m.transform,d3.zoomIdentity,d3.zoomTransform(l.node()).invert([t/2,o/2]))})),u=l.append("g"),m=d3.zoom().scaleExtent([1,8]).on("zoom",(function(e){const{transform:t}=e;u.attr("transform",t),u.attr("stroke-width",1/t.k)})),L=u.append("g").attr("cursor","pointer").selectAll("path").data(topojson.feature(c,c.objects.states).features).enter().append("path").attr("d",s).attr("fill",(t=>{let n=t.properties.name,a=d.find((e=>e.State===n));const c=d3.mean(d.slice(6),(t=>e(t["18 or Older Estimate"]))),i=function(e){const t=e.length,n=e.reduce(((e,t)=>e+t))/t,r=e.map((e=>e-n)).map((e=>Math.pow(e,2))).reduce(((e,t)=>e+t))/t;return Math.sqrt(r)}(d3.map(d.slice(6),(t=>e(t["18 or Older Estimate"]))));a||={"18 or Older Estimate":`${c}`};const o=e(a["18 or Older Estimate"]),s=c-2*i,l=c-1*i,u=c+1*i,m=c+2*i;return o<=s?r[0]:o>s&&o<=l?r[1]:o>l&&o<=c?r[2]:o>c&&o<=u?r[3]:o>u&&o<=m?r[4]:r[5]})).join("path").on("click",(function(r,a){r.stopPropagation();const c=document.getElementById("state-details"),u=document.getElementById("count-details"),H=document.getElementById("percent-details");u.innerHTML="",H.innerHTML="";let E=a.properties.name,S=d.find((e=>e.State===E));d3.csv(n).then((t=>{i=t.map((function(e){return{State:e.State,"12-17 Estimate":e["12-17 Estimate"],"18-25 Estimate":e["18-25 Estimate"],"12 or Older Estimate":e["12 or Older Estimate"],"18 or Older Estimate":e["18 or Older Estimate"],"26 or Older Estimate":e["26 or Older Estimate"]}}));let n=i.find((e=>e.State===E));const r=document.createElement("li");r.innerHTML=`Raw count estimations (by age) for ${E}:`,u.appendChild(r);const a=document.createElement("li");a.innerHTML=`Percentage estimations (by age) for ${E}:`,H.appendChild(a),Object.entries(S).slice(1).forEach((function(t){if(t[1]){const n=document.createElement("li");n.innerHTML=`${t[0]}: ${1e3*e(t[1])} people`,u.appendChild(n)}})),Object.entries(n).slice(1).forEach((function(e){if(e[1]){const t=document.createElement("li");t.innerHTML=`${e[0]}: ${e[1]}`,H.appendChild(t)}}))})),c.classList.remove("hidden"),c.style.backgroundColor="lightgray",c.setAttribute("z-index","5"),function(e,n){const[[r,a],[c,d]]=s.bounds(n);e.stopPropagation(),L.transition().style("fill",null),l.transition().duration(750).call(m.transform,d3.zoomIdentity.translate(t/2.2,o/2).scale(Math.min(8,.9/Math.max((c-r)/t,(d-a)/o))).translate(-(r+c)/2,-(a+d)/2),d3.pointer(e,l.node()))}(r,a)})).attr("d",s);L.append("title").text((e=>e.properties.name)),u.append("path").attr("fill","none").attr("stroke","white").attr("stroke-linejoin","round").attr("d",s(topojson.mesh(c,c.objects.states,((e,t)=>e!==t))));const H=d3.select(".legend");let E=65;r.forEach((function(e,t){H.append("rect").attr("x","0").attr("y",`${E}`).attr("width","20").attr("height","80").attr("fill",`${e}`).attr("id",`color-${t}`).attr("idx",t).attr("data-text",`${a[t]}`),d3.select(`#color-${t}`).append("text").attr("x","23").attr("y",`${E}`).attr("width","200").attr("height","80").text(`${a[t]}`),d3.select(`#color-${t}`).on("mouseover",(t=>{const n=t.target,r=n.dataset.text,a=Number(n.getAttribute("idx")),c=document.getElementById("legend-detail"),d=document.querySelector(".map-container").offsetLeft,i=document.querySelector(".map-container").offsetTop,o=document.querySelector(".legend").width.baseVal.value;c.innerText=r,c.style.display="block",c.style.left=`${d+o}px`,c.style.top=`${i+65+80*a}px`,c.style.backgroundColor=e})).on("mouseout",(()=>{document.getElementById("legend-detail").style.display="none"})),E+=80})),l.call(m)}()}))}))}const n=["#6B705C","#A5A58D","#B7B7A4","#FFE8D6","#DDBEA9","#CB997E"],r=["#ccccff","#99ccff","#6699ff","#3366ff","#3333ff","#000066"],a=["#F7D1CD","#E8C2CA","#D1B3C4","#B392AC","#735D78","#4C404F"],c=["#EDE0D4","#E6CCB2","#DDB892","#B08968","#9C6644","#7F5539"],d=["#ECF39E","#BDD39C","#90A955","#4F772D","#31572C","#132A13"],i=["#FFCDB2","#FFB4A2","#E5989B","#C17179","#A36672","#6D6875"],o=["#E9E5D8","#D4E0CD","#A3C9A8","#84B59F","#69A297","#50808E"],s=["#D58272","#A7A18B","#B0B3A8","#8FA78B","#61BD87","#429E69"],l=["#8DA253","#C3CFA0","#FEDB72","#F7E1D3","#EDBF9E","#DA9461"],u=["#EFD9CE","#DEC0F1","#B79CED","#957FEF","#7161EF","#3921E8"],m=["#745CFF","#8585FF","#BAADFF","#FFEEDD","#FFA970","#FF781F"];document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("user-modal"),L=document.querySelector(".close"),H=document.querySelectorAll(".close")[1],E=document.getElementById("state-details"),S=document.getElementById("count-details"),p=document.getElementById("percent-details");L.addEventListener("click",(function(){e.classList.add("hidden")})),H.addEventListener("click",(function(){E.classList.add("hidden"),S.innerHTML="",p.innerHTML=""})),window.addEventListener("click",(function(t){t.target==e&&e.classList.add("hidden")})),t("NSDUH_count/table27.csv","NSDUH_percentages/table27.csv",n),document.getElementById("table27").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Any Mental Illness in the Past Year",t("NSDUH_count/table27.csv","NSDUH_percentages/table27.csv",n)})),document.getElementById("table28").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Serious Mental Illness in the Past Year",t("NSDUH_count/table28.csv","NSDUH_percentages/table28.csv",a)})),document.getElementById("table29").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Received Mental Health Services in the Past Year",t("NSDUH_count/table29.csv","NSDUH_percentages/table29.csv",s)})),document.getElementById("table30").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Major Depressive Episode in the Past Year",t("NSDUH_count/table30.csv","NSDUH_percentages/table30.csv",r)})),document.getElementById("table31").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Had Serious Thoughts of Suicide in the Past Year",t("NSDUH_count/table31.csv","NSDUH_percentages/table31.csv",l)})),document.getElementById("table32").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Made Any Suicide Plans in the Past Year",t("NSDUH_count/table32.csv","NSDUH_percentages/table32.csv",u)})),document.getElementById("table33").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Attempted Suicide in the Past Year",t("NSDUH_count/table33.csv","NSDUH_percentages/table33.csv",r)})),document.getElementById("table7").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Cocaine Use in the Past Year",t("NSDUH_count/table7.csv","NSDUH_percentages/table7.csv",m)})),document.getElementById("table11").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Methamphetamine Use in the Past Year",t("NSDUH_count/table11.csv","NSDUH_percentages/table11.csv",n)})),document.getElementById("table12").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Pain Reliever Misuse in the Past Year",t("NSDUH_count/table12.csv","NSDUH_percentages/table12.csv",i)})),document.getElementById("table22").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Alcohol Use Disorder in the Past Year",t("NSDUH_count/table22.csv","NSDUH_percentages/table22.csv",o)})),document.getElementById("table2").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Marijuana Use in the Past Year",t("NSDUH_count/table2.csv","NSDUH_percentages/table2.csv",d)})),document.getElementById("table23").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Substance Use Disorder in the Past Year",t("NSDUH_count/table23.csv","NSDUH_percentages/table23.csv",c)})),document.getElementById("table26").addEventListener("click",(()=>{S.innerHTML="",p.innerHTML="",E.classList.add("hidden"),document.querySelector(".us-map").innerHTML="",document.querySelector(".legend").innerHTML="",document.querySelector("h2").innerHTML="Needing But Not Receiving Treatment at a Specialty Facility for Substance Use in the Past Year",t("NSDUH_count/table26.csv","NSDUH_percentages/table26.csv",n)}))}))}()}();
//# sourceMappingURL=main.js.map